{"version":3,"sources":["location_api.js","dom.js","weather_api.js","index.js"],"names":["LocationApi","fetch","method","then","res","status","json","Promise","reject","ip","Dom","preloader","document","getElementById","location","city","style","opacity","coordinates","value","WeatherApi","api","temp","ﾑ（ty_name","setTemp","innerHTML","Math","round","abs","main","locationApi","dom","weather","btn2","bycity","addEventListener","showPreloader","getMyIp","getMyLocation","setCoordinates","getMyWeather","setWeather","hidePreloader","catch","eror","console","log"],"mappings":"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","file":"lesson_22.ed44b09f.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\n  getMyIp() {\n    return fetch('https://api.ipify.org?format=json', {\n      method: 'GET',\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          return res.json();\n          \n        }\n\n        return Promise.reject(res.status);\n      });\n  }\n\n  getMyLocation(ip) {\n    return fetch(`https://freegeoip.net/json/${ip}`, {\n      method: 'GET',\n     \n    })\n    \n      .then((res) => {\n        if (res.status === 200) {\n          return res.json();\n        }\n\n        return Promise.reject(res.status);\n      });\n  }\n}\n\n","export default class Dom {\n  constructor() {\n    this.preloader = document.getElementById('preloader');\n    this.location = document.getElementById('location');\n    this.city = document.getElementById('city');\n  }\n\n  showPreloader() {\n    this.preloader.style.opacity = 1;\n    this.location.style.opacity = 0;\n  }\n\n  hidePreloader() {\n    this.preloader.style.opacity = 0;\n    this.location.style.opacity = 1;\n  }\n\n  setCoordinates(coordinates) {\n    // this.location.innerHTML = coordinates;\n    city.value = coordinates.city;\n    // this.city.innerHTML = res.city;\n\n  }\n\n}","export default class WeatherApi {\r\n    constructor() {\r\n        this.api = 'd6c8367bf64b6e1c5dc9fa151ad10528';\r\n        // this.ﾑ（ty_name = \"Poltava\";\r\n        this.temp = document.getElementById('temp');\r\n    }\r\n\r\n    getMyWeather(ﾑ（ty_name) {\r\n      return fetch(`https://api.openweathermap.org/data/2.5/weather?q=${ﾑ（ty_name}&appid=${this.api}`)\r\n      \r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            return res.json();\r\n          }\r\n  \r\n          return Promise.reject(res.status);\r\n\r\n        });\r\n      }\r\n        setWeather(setTemp) {\r\n          this.temp.innerHTML = Math.round(Math.abs(setTemp.main.temp - 273.15)) + ' &#8451;';;\r\n        }\r\n    }","import LocationApi from './location_api';\nimport Dom from './dom';\nimport WeatherApi from './weather_api';\n\n\nconst locationApi = new LocationApi();\nconst dom = new Dom();\nconst weather = new WeatherApi();\nconst btn2 = document.getElementById('btn2');\nconst bycity = document.getElementById('bycity');\n\n\n\n\nbtn2.addEventListener('click', () => {\n  dom.showPreloader();\n  locationApi.getMyIp()\n    .then((res) => {\n      return locationApi.getMyLocation(res.ip)\n    })\n    .then((res) => {\n      dom.setCoordinates(res);\n      return weather.getMyWeather(res.city);\n    })\n    .then((res) => {\n      weather.setWeather(res);\n      dom.hidePreloader();\n    })\n  \n    .catch((eror) => {\n      dom.hidePreloader()\n      console.log(eror);\n    });\n});\n\nbycity.addEventListener('click', () => {\n  const city = document.getElementById('city');\n      if (city.value) {\n        dom.showPreloader();\n        weather.getMyWeather(city.value)\n        .then(res => {\n          weather.setWeather(res)\n          dom.hidePreloader()\n          \n        })\n        .catch((eror) => {\n          dom.hidePreloader()\n          console.log(eror);\n        });\n      }\n});"]}